# git
sudo apt install git
git config --global http.sslVerify false
git config --global credential.helper store

# luposdate3000
cd ~/
mkdir lupos
cd lupos/
git clone hhtps://sun01.pool.ifis.uni-luebeck.de/groppe/luposdate3000.git
sudo apt install openjdk-8-jdk-headless unzip

# kotlin
cd ~/lupos/
wget https://github.com/JetBrains/kotlin/releases/download/v1.5.10/kotlin-compiler-1.5.10.zip
unzip kotlin-compiler-1.5.10.zip
rm kotlin-compiler-1.5.10.zip
cd kotlinc/bin/
echo "export PATH=$PATH:$(pwd)" >> ~/.bashrc
sudo ln -s ~/lupos/kotlin/bin/kotlin /bin/kotlin
sudo ln -s ~/lupos/kotlin/bin/kotlinc /bin/kotlinc


# bignum
cd ~/lupos/
git clone https://github.com/ionspin/kotlin-multiplatform-bignum.git
cd kotlin-multiplatform-bignum/bignum
# patch buildfile
sed 's/.*it.compileKotlinTask.kotlinOptions.moduleKind = "commonjs"//g' -i build.gradle.kts
sed 's/if.*primaryDevelopment.*{/if (true) {/g' -i build.gradle.kts
sed 's/version.*=.*/version = "0.3.1-SNAPSHOT"/g' -i build.gradle.kts
cd ..
./gradlew publishToMavenLocal

# intellij
cd ~/lupos/
wget https://download-cf.jetbrains.com/idea/ideaIC-2021.1.1.tar.gz
tar -xzf ideaIC-2021.1.1.tar.gz
rm ideaIC-2021.1.1.tar.gz
cd idea-IC-211.7142.45/bin/
./idea.sh


# compile luposdate3000
cd ~/lupos/luposdate3000
# compile from commandline
./launcher.main.kts --setupCommandline --releaseMode=Enable
./gradlew build
#compile with Intellij
./launcher.main.kts --setupIntellijIdea --releaseMode=Enable
#open Intellij and compile

# miniconda
wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
chmod +x Miniconda-latest-Linux-x86_64.sh
./Miniconda-latest-Linux-x86_64.sh
#restart shell
conda create -n pythonEnvironment
conda activate pythonEnvironment
#python packages
conda install pip
pip install stable-baselines3

# setup python module
cd ~/lupos/luposdate3000/src/pythonProject1/gym-database/
pip install -e .

# run python:
#activate conda environment
conda activate pythonEnvironment
cd ~/lupos/luposdate3000/src/pythonProject1/
python joinopti_agent train train.me
